<section [appLoading]="signing$ | async" class="w-full h-full relative">
  <div class="w-full text-center mb-4">
    <h2 class="m-0 p-0 text-off-black font-bold text-xl">
      Sign Request
    </h2>

    <p *ngIf="from !== 'wallet'" class="pt-4 text-xs text-label">
      From: {{ from }}
    </p>
  </div>

  <section class="w-full mb-8">
    <dl>
      <ng-container *ngFor="let operation of (operations$ | async)">

        <ng-container *ngIf="operation.type === 'payment'">
          <dt class="text-base font-bold mb-1 w-full">Transaction type:</dt>
          <dd class="break-all text-sm mb-3 w-full">Payment</dd>

          <dt class="text-base font-bold mb-1 w-full">Destination:</dt>
          <dd class="break-all text-sm mb-3 w-full">{{ operation.destination }}</dd>

          <dt class="text-base font-bold mb-1 w-full">Asset Code:</dt>
          <dd class="break-all text-sm mb-3 w-full">{{ operation.asset.code }}</dd>

          <ng-container *ngIf="operation.asset.issuer">
            <dt class="text-base font-bold mb-1 w-full">Asset Issuer:</dt>
            <dd class="break-all text-sm mb-3 w-full">{{ operation.asset.issuer }}</dd>
          </ng-container>

          <dt class="text-base font-bold mb-1 w-full">Amount to send:</dt>
          <dd class="break-all text-sm mb-3 w-full">{{ operation.amount | number: '0.0-7' }}</dd>
        </ng-container>

        <ng-container *ngIf="operation.type === 'changeTrust'">
          <dt class="text-base font-bold mb-1 w-full">Transaction type:</dt>
          <dd class="break-all text-sm mb-3 w-full">Change trust</dd>

          <dt class="text-base font-bold mb-1 w-full">Asset Code:</dt>
          <dd class="break-all text-sm mb-3 w-full">{{ operation.line.code }}</dd>

          <ng-container *ngIf="operation.line.issuer">
            <dt class="text-base font-bold mb-1 w-full">Asset Issuer:</dt>
            <dd class="break-all text-sm mb-3 w-full">{{ operation.line.issuer }}</dd>
          </ng-container>

          <dt class="text-base font-bold mb-1 w-full">Limit:</dt>
          <dd class="break-all text-sm mb-3 w-full">{{ operation.limit | number: '0.0-7' }}</dd>
        </ng-container>

        <ng-container *ngIf="operation.type === 'pathPaymentStrictSend' || operation.type === 'pathPaymentStrictReceive'">
          <dt class="text-base font-bold mb-1 w-full">Transaction type:</dt>
          <dd class="break-all text-sm mb-3 w-full">
            Path payment strict  {{ operation.type === 'pathPaymentStrictSend' ? 'send' : 'receive' }}
          </dd>

          <dt class="text-base font-bold mb-1 w-full">Destination:</dt>
          <dd class="break-all text-sm mb-3 w-full">{{ operation.destination }}</dd>

          <ng-container *ngIf="operation.type === 'pathPaymentStrictSend'">
            <dt class="text-base font-bold mb-1 w-full">Sending amount:</dt>
            <dd class="break-all text-sm mb-3 w-full">{{ operation.sendAmount | number: '0.0-7' }}</dd>
          </ng-container>

          <ng-container *ngIf="operation.type === 'pathPaymentStrictReceive'">
            <dt class="text-base font-bold mb-1 w-full">Max amount to send:</dt>
            <dd class="break-all text-sm mb-3 w-full">{{ operation.sendMax | number: '0.0-7' }}</dd>
          </ng-container>

          <dt class="text-base font-bold mb-1 w-full">Sending Asset:</dt>
          <dd class="break-all text-sm mb-3 w-full">{{ operation.sendAsset.code }}</dd>

          <ng-container *ngIf="operation.type === 'pathPaymentStrictSend'">
            <dt class="text-base font-bold mb-1 w-full">Destination minimum:</dt>
            <dd class="break-all text-sm mb-3 w-full">{{ operation.destMin | number: '0.0-7' }}</dd>
          </ng-container>

          <ng-container *ngIf="operation.type === 'pathPaymentStrictReceive'">
            <dt class="text-base font-bold mb-1 w-full">Destination amount:</dt>
            <dd class="break-all text-sm mb-3 w-full">{{ operation.destAmount | number: '0.0-7' }}</dd>
          </ng-container>

          <dt class="text-base font-bold mb-1 w-full">Destination Asset:</dt>
          <dd class="break-all text-sm mb-3 w-full">{{ operation.destAsset.code }}</dd>

<!--          TODO: add the path-->
        </ng-container>

        <ng-container *ngIf="operation.type === 'manageBuyOffer' || operation.type === 'manageSellOffer'">
          <dt class="text-base font-bold mb-1 w-full">Transaction type:</dt>
          <dd class="break-all text-sm mb-3 w-full">
            {{ operation.type === 'manageBuyOffer' ? 'Buy' : 'Sell' }} Offer
          </dd>

          <dt class="text-base font-bold mb-1 w-full">Asset Selling:</dt>
          <dd class="break-all text-sm mb-3 w-full">{{ operation.selling.code }}</dd>

          <ng-container *ngIf="operation.selling.issuer">
            <dt class="text-base font-bold mb-1 w-full">Selling Asset Issuer:</dt>
            <dd class="break-all text-sm mb-3 w-full">{{ operation.selling.issuer }}</dd>
          </ng-container>

          <dt class="text-base font-bold mb-1 w-full">Asset Buying:</dt>
          <dd class="break-all text-sm mb-3 w-full">{{ operation.buying.code }}</dd>

          <ng-container *ngIf="operation.buying.issuer">
            <dt class="text-base font-bold mb-1 w-full">Buying Asset Issuer:</dt>
            <dd class="break-all text-sm mb-3 w-full">{{ operation.buying.issuer }}</dd>
          </ng-container>

          <ng-container *ngIf="operation.type === 'manageBuyOffer'">
            <dt class="text-base font-bold mb-1 w-full">Amount to Buy:</dt>
            <dd class="break-all text-sm mb-3 w-full">{{ operation.buyAmount | number: '0.0-7' }}</dd>
          </ng-container>

          <ng-container *ngIf="operation.type === 'manageSellOffer'">
            <dt class="text-base font-bold mb-1 w-full">Amount to Sell:</dt>
            <dd class="break-all text-sm mb-3 w-full">{{ operation.amount | number: '0.0-7' }}</dd>
          </ng-container>

          <dt class="text-base font-bold mb-1 w-full">Price per unit to Buy:</dt>
          <dd class="break-all text-sm mb-3 w-full">{{ operation.price | number: '0.0-7' }}</dd>

          <ng-container *ngIf="operation.offerId && operation.offerId != '0'">
            <dt class="text-base font-bold mb-1 w-full">Offer ID:</dt>
            <dd class="break-all text-sm mb-3 w-full">{{ operation.offerId }}</dd>
          </ng-container>
        </ng-container>

        <ng-container *ngIf="!!operation.source">
          <dt class="text-base font-bold mb-1 w-full">Source:</dt>
          <dd class="break-all text-sm mb-3 w-full">{{ operation.source }}</dd>
        </ng-container>

      </ng-container>

      <div class="py-4"></div>

      <dt class="text-base font-bold mb-1 w-full">Fee:</dt>
      <dd class="break-all text-sm mb-3 w-full">{{ (fee$ | async) }} XLM</dd>

      <ng-container *ngIf="memoText$ | async">
        <dt class="text-base font-bold mb-1 w-full">Memo:</dt>
        <dd class="break-all text-sm mb-3 w-full">{{ (memoText$ | async) }}</dd>
      </ng-container>
    </dl>
  </section>

  <section class="w-full flex">
    <div class="flex-1 pr-2">
      <button (click)="onDenied()" class="w-full btn btn--small btn-error-alternative">Deny</button>
    </div>
    <div class="flex-1 pl-2">
      <button (click)="onAccepted()" class="w-full btn btn--small btn-off-black">Accept</button>
    </div>
  </section>

</section>
